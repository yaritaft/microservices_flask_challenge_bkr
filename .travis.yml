
os:
    - linux
dist: trusty

services:
    - docker
distro: alpine
sudo: required
addons:
    postgresql: "11.4"
    apt:
        packages:
            - postgresql
            - postgresql-server-dev
            - postgresql-contrib
            - python-setuptools
            - docker-ce

env:
    - DATABASE_URL=postgresql+psycopg2://postgres:123456789@db/mytestingdb
    - SECRET_KEY=mysecretkey
    - APP_ENV=testing

language: python
# python versions
python:
    - "3.6.9"
# install requirements
install:
    - pip install -r requirements.txt
    - pip install coveralls
# To run tests
script:
    - sleep 5
    - coverage run manage.py test
# send coverage report to coveralls
after_success:
    coveralls
